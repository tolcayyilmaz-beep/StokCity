<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lafkat – Ayarlar</title>
<meta name="description" content="Lafkat Ayarlar – Dil, bildirim, tema, hesap ve mod seçenekleri." />
<style>
  :root{
    --orange-1:#ff7a1a; --orange-2:#f36a00;
    --card:#fff9f2; --ink:#2b2b2b; --muted:#7b7b7b; --ring:rgba(0,0,0,.08);
    --shadow:0 8px 24px rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.08);
    --radius:18px;
  }
  [data-theme="dark"]{
    --card:#1e1e1e; --ink:#f1f1f1; --muted:#b7b7b7; --ring:rgba(255,255,255,.08);
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink);
    background:
      radial-gradient(90vmax 90vmax at 100% -10%, rgba(255,255,255,.08), transparent 60%),
      linear-gradient(180deg,var(--orange-1),var(--orange-2));
    background-attachment:fixed;
  }

  /* Topbar & Drawer */
  .topbar{position:sticky;top:0;z-index:60;backdrop-filter:blur(6px);background:rgba(255,255,255,.30);border-bottom:1px solid rgba(255,255,255,.45)}
  .topbar-inner{max-width:1200px;margin:auto;padding:10px 16px;display:flex;align-items:center;gap:10px}
  .hamburger button{appearance:none;background:#fff;border:1px solid rgba(0,0,0,.12);border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}
  .brand{display:flex;align-items:center;gap:10px;font-weight:900}
  .brand img{width:34px;height:34px;border-radius:9px;box-shadow:0 6px 14px rgba(0,0,0,.25)}
  .brand .t{font-size:22px;color:#fff;text-shadow:0 2px 10px rgba(0,0,0,.28)}
  nav.hnav{margin-left:auto;display:none;gap:8px;flex-wrap:wrap}
  nav.hnav a{color:#1b1b1b;text-decoration:none;font-weight:600;background:rgba(255,255,255,.85);padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.55)}
  nav.hnav a.active{outline:3px solid rgba(255,255,255,.7)}
  [data-theme="dark"] nav.hnav a{background:rgba(255,255,255,.12);color:#fff;border-color:rgba(255,255,255,.2)}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:opacity .25s;z-index:55}
  .overlay.show{opacity:1;pointer-events:auto}
  .drawer{position:fixed;inset:0 auto 0 0;width:min(84vw,320px);background:#fff;border-right:1px solid rgba(0,0,0,.08);box-shadow:var(--shadow);
          transform:translateX(-100%);transition:transform .25s;z-index:56;display:flex;flex-direction:column}
  .drawer.open{transform:translateX(0)}
  .drawer .head{padding:16px;border-bottom:1px solid rgba(0,0,0,.06);display:flex;align-items:center;gap:10px}
  .drawer nav{display:grid;gap:8px;padding:12px}
  .drawer nav a{padding:10px 12px;border-radius:12px;border:1px solid rgba(0,0,0,.08);text-decoration:none;color:#1b1b1b;background:#fff;font-weight:700}
  .drawer .foot{margin-top:auto;padding:12px;border-top:1px solid rgba(0,0,0,.06)}
  @media (min-width:980px){ nav.hnav{display:flex}.hamburger{display:none} }
  [data-theme="dark"] .drawer{background:#131313;color:#f1f1f1}

  /* Page */
  .wrap{max-width:900px;margin:22px auto;padding:0 16px}
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid var(--ring)}
  .card .hd{padding:14px 16px;border-bottom:1px solid rgba(0,0,0,.06);font-weight:800}
  .card .bd{padding:14px 16px}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .hint{font-size:12px;color:var(--muted)}
  .btn{padding:8px 12px;border-radius:10px;border:1px solid rgba(0,0,0,.12);background:#fff;cursor:pointer;font-weight:800}
  .btn.primary{background:linear-gradient(180deg,#ffb37a,#ff8e3a);color:#3a240e;border:0}
  .btn.danger{color:#b12020;border-color:#b12020;background:#fff}
  input[type="email"], select{padding:8px 10px;border:1px solid rgba(0,0,0,.12);border-radius:10px}
  .switch{position:relative;width:48px;height:28px;background:#ddd;border-radius:999px;cursor:pointer;display:inline-block}
  .switch input{display:none}
  .switch .k{position:absolute;top:3px;left:3px;width:22px;height:22px;background:#fff;border-radius:50%;transition:transform .2s}
  .switch input:checked + .k{transform:translateX(20px)}
  [data-theme="dark"] .btn{background:#222;color:#f1f1f1;border-color:rgba(255,255,255,.15)}
  [data-theme="dark"] input, [data-theme="dark"] select{background:#161616;color:#f1f1f1;border-color:rgba(255,255,255,.2)}

  /* Modal & Toast */
  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.45);z-index:70}
  .modal.open{display:grid}
  .dialog{width:min(520px,92vw);background:#fff;border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
  .dialog .hd{padding:12px 14px;font-weight:900;border-bottom:1px solid rgba(0,0,0,.06)}
  .dialog .bd{padding:14px}
  .dialog .ft{padding:12px 14px;border-top:1px solid rgba(0,0,0,.06);display:flex;gap:10px;justify-content:flex-end}
  [data-theme="dark"] .dialog{background:#1f1f1f;color:#f1f1f1}
  .toast{position:fixed;bottom:18px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:999px;opacity:0;pointer-events:none;transition:opacity .25s;z-index:80}
  .toast.show{opacity:1}
</style>
</head>
<body>
  <!-- Overlay & Drawer -->
  <div class="overlay" id="overlay"></div>
  <aside class="drawer" id="drawer" aria-hidden="true" aria-label="Menü">
    <div class="head"><img src="assets/logo.png" alt="" width="28" height="28" onerror="this.style.display='none'"><strong>Lafkat Menü</strong></div>
    <nav>
      <a href="index.html">Anasayfa</a>
      <a href="forum.html">Forum</a>
      <a href="liderlik.html">Liderlik</a>
      <a href="#">Arkadaşlar</a>
      <a href="profil.html">Profil</a>
      <a href="ayarlar.html">Ayarlar</a>
      <a href="#" id="adminLink1" style="display:none">Admin Yönetimi</a>
    </nav>
    <div class="foot"><a href="#" style="text-decoration:none;color:#b12020;font-weight:800">Çıkış</a></div>
  </aside>

  <!-- Topbar -->
  <header class="topbar">
    <div class="topbar-inner">
      <div class="hamburger"><button id="menuBtn" aria-label="Menüyü aç" aria-expanded="false" aria-controls="drawer">☰ Menü</button></div>
      <a class="brand" href="index.html">
        <img src="assets/logo.png" alt="Lafkat" onerror="this.style.display='none'"><span class="t">Lafkat</span>
      </a>
      <nav class="hnav" aria-label="Ana menü">
        <a href="index.html">Anasayfa</a>
        <a href="forum.html">Forum</a>
        <a href="liderlik.html">Liderlik</a>
        <a href="#">Arkadaşlar</a>
        <a href="profil.html">Profil</a>
        <a class="active" href="ayarlar.html">Ayarlar</a>
        <a href="#" id="adminLink2" style="display:none">Admin Yönetimi</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Genel Tercihler -->
    <section class="card">
      <div class="hd">Genel Tercihler</div>
      <div class="bd">
        <div class="row">
          <label for="lang"><strong>Dil</strong></label>
          <select id="lang" aria-label="Dil seçimi">
            <option value="auto">Otomatik (Tarayıcı)</option>
            <option value="tr">Türkçe</option>
            <option value="en">English</option>
          </select>
          <span class="hint">Metinler demo amaçlı; çok dilli içerik sonraki adımda eklenecek.</span>
        </div>

        <div class="row" style="margin-top:10px">
          <label class="row" style="gap:8px">
            <span><strong>Bildirimler</strong></span>
            <span class="switch" title="Bildirimleri aç/kapat">
              <input type="checkbox" id="notif" />
              <span class="k"></span>
            </span>
          </label>
          <span class="hint">Beğeni/yorum gibi etkinlikler için bildirim izni.</span>
        </div>

        <div class="row" style="margin-top:10px">
          <strong>Tema</strong>
          <label class="row" style="gap:6px"><input type="radio" name="theme" value="light" /> Açık</label>
          <label class="row" style="gap:6px"><input type="radio" name="theme" value="dark" /> Koyu</label>
          <label class="row" style="gap:6px"><input type="radio" name="theme" value="system" /> Sistem</label>
        </div>

        <div class="row" style="margin-top:10px">
          <label class="row" style="gap:8px">
            <span><strong>Mod</strong> (DEMO ↔ CANLI)</span>
            <span class="switch">
              <input type="checkbox" id="mode" />
              <span class="k"></span>
            </span>
          </label>
          <span class="hint" id="modeHint">DEMO: yerel veriler. CANLI: Firebase’e bağlanır (ileride).</span>
        </div>

        <div class="row" style="margin-top:14px">
          <button class="btn primary" id="save">Kaydet</button>
          <button class="btn" id="reset">Varsayılanlara Dön</button>
        </div>
      </div>
    </section>

    <!-- Hesap -->
    <section class="card" style="margin-top:18px">
      <div class="hd">Hesap</div>
      <div class="bd">
        <div class="row">
          <input type="email" id="resetMail" placeholder="E-posta adresiniz" />
          <button class="btn" id="resetPwd">Şifreyi Sıfırla</button>
          <span class="hint">E-postaya şifre sıfırlama bağlantısı gönderilir (demo).</span>
        </div>

        <div class="row" style="margin-top:14px">
          <button class="btn danger" id="deleteAcc">Hesabı Sil</button>
          <span class="hint">Kalıcıdır. Tüm içerikleriniz silinir (demo akış).</span>
        </div>
      </div>
    </section>
  </main>

  <!-- Silme Modali -->
  <div class="modal" id="delModal" aria-hidden="true" role="dialog" aria-label="Hesabı Sil">
    <div class="dialog">
      <div class="hd">Hesabı Sil</div>
      <div class="bd">
        <p><strong>Bu işlem geri alınamaz.</strong> Devam etmek istediğinize emin misiniz?</p>
        <label class="row" style="gap:6px"><input type="checkbox" id="confirmChk" /> Onaylıyorum</label>
      </div>
      <div class="ft">
        <button class="btn" id="cancelDel">Vazgeç</button>
        <button class="btn danger" id="confirmDel" disabled>Kalıcı Olarak Sil</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
  // ---------- Admin link (demo) ----------
  (new URLSearchParams(location.search)).get("admin")==="1" && (adminLink1.style.display=adminLink2.style.display="inline-block");

  // ---------- Drawer ----------
  const menuBtn=document.getElementById('menuBtn');
  const drawer=document.getElementById('drawer');
  const overlay=document.getElementById('overlay');
  function openDrawer(){drawer.classList.add('open');overlay.classList.add('show');menuBtn.setAttribute('aria-expanded','true');document.body.style.overflow='hidden'; drawer.querySelector('a').focus();}
  function closeDrawer(){drawer.classList.remove('open');overlay.classList.remove('show');menuBtn.setAttribute('aria-expanded','false');document.body.style.overflow='';}
  menuBtn.addEventListener('click', ()=> drawer.classList.contains('open')?closeDrawer():openDrawer());
  overlay.addEventListener('click', closeDrawer);
  window.addEventListener('keydown', e=>{ if(e.key==='Escape' && drawer.classList.contains('open')) closeDrawer(); });

  // ---------- Storage helpers ----------
  const LS_KEY = 'lafkat.settings';
  function loadSettings(){
    try{ return JSON.parse(localStorage.getItem(LS_KEY)) || {}; }catch(e){ return {}; }
  }
  function saveSettings(s){ localStorage.setItem(LS_KEY, JSON.stringify(s)); }

  // ---------- UI refs ----------
  const langSel = document.getElementById('lang');
  const notifChk = document.getElementById('notif');
  const themeRadios = [...document.querySelectorAll('input[name="theme"]')];
  const modeChk = document.getElementById('mode');
  const modeHint = document.getElementById('modeHint');
  const toastEl = document.getElementById('toast');

  // ---------- Toast ----------
  const toast=(m)=>{toastEl.textContent=m;toastEl.classList.add('show');setTimeout(()=>toastEl.classList.remove('show'),1400)};

  // ---------- Theme ----------
  function systemPrefersDark(){ return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches; }
  function applyTheme(value){
    const v = value || 'system';
    const theme = v==='system' ? (systemPrefersDark() ? 'dark':'light') : v;
    document.documentElement.setAttribute('data-theme', theme==='dark' ? 'dark' : 'light');
  }
  window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').addEventListener?.('change', e=>{
    const s=loadSettings(); if((s.theme||'system')==='system'){ applyTheme('system'); }
  });

  // ---------- Init ----------
  function init(){
    const s = loadSettings();
    langSel.value = s.lang || 'auto';
    notifChk.checked = !!s.notifications;
    const theme = s.theme || 'system';
    (themeRadios.find(r=>r.value===theme) || themeRadios[2]).checked = true;
    modeChk.checked = (s.mode||'demo')==='live';
    modeHint.textContent = modeChk.checked ? 'CANLI: Firebase’e bağlanır (ileride).' : 'DEMO: yerel veriler.';
    applyTheme(theme);
  }
  init();

  // ---------- Save / Reset ----------
  document.getElementById('save').addEventListener('click', async ()=>{
    const theme = (themeRadios.find(r=>r.checked) || {}).value || 'system';
    const s = {
      lang: langSel.value,
      notifications: notifChk.checked,
      theme,
      mode: modeChk.checked ? 'live' : 'demo'
    };
    // Request notifications permission if turning on
    if(s.notifications && 'Notification' in window && Notification.permission!=='granted'){
      try{
        const perm = await Notification.requestPermission();
        if(perm!=='granted'){ s.notifications=false; notifChk.checked=false; toast('Bildirim izni verilmedi'); }
      }catch(e){}
    }
    saveSettings(s);
    applyTheme(theme);
    modeHint.textContent = modeChk.checked ? 'CANLI: Firebase’e bağlanır (ileride).' : 'DEMO: yerel veriler.';
    toast('Ayarlar kaydedildi');
  });

  document.getElementById('reset').addEventListener('click', ()=>{
    localStorage.removeItem(LS_KEY);
    langSel.value='auto';
    notifChk.checked=false;
    themeRadios.forEach(r=> r.checked = (r.value==='system'));
    modeChk.checked=false;
    applyTheme('system');
    modeHint.textContent='DEMO: yerel veriler.';
    toast('Varsayılanlara dönüldü');
  });

  // ---------- Password reset (demo) ----------
  document.getElementById('resetPwd').addEventListener('click', ()=>{
    const mail = document.getElementById('resetMail').value.trim();
    if(!mail){ toast('E-posta giriniz'); return; }
    // Demo: sadece bilgilendirme
    toast('Şifre sıfırlama bağlantısı gönderildi (demo)');
  });

  // ---------- Delete account modal (demo) ----------
  const delModal=document.getElementById('delModal');
  const confirmChk=document.getElementById('confirmChk');
  const confirmDel=document.getElementById('confirmDel');
  document.getElementById('deleteAcc').addEventListener('click', ()=>{
    delModal.classList.add('open'); delModal.setAttribute('aria-hidden','false');
    confirmChk.checked=false; confirmDel.disabled=true;
  });
  document.getElementById('cancelDel').addEventListener('click', ()=>{ delModal.classList.remove('open'); delModal.setAttribute('aria-hidden','true'); });
  confirmChk.addEventListener('change', ()=>{ confirmDel.disabled = !confirmChk.checked; });
  confirmDel.addEventListener('click', ()=>{
    delModal.classList.remove('open'); delModal.setAttribute('aria-hidden','true');
    toast('Hesap silindi (demo)');
  });
</script>
</body>
</html>
