
<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>LafKat â€“ Admin</title>
  <link rel="stylesheet" href="assets/style.css"/>
  <script src="assets/app.js"></script>
</head>
<body onload="initAdmin()">
  
<div class="topbar">
  <div class="nav">
    <a class="brand brand-link" href="index.html" aria-label="LafKat">
      <img src="assets/logo.svg" alt="" style="width:28px;height:28px" />
      <span>LafKat</span>
    </a>
    <button class="hamburger btn small ghost" onclick="toggleMenu()">â˜°</button>
    <div class="menu">
      <a href="home.html" data-page="home">Anasayfa</a>
      <a href="forum.html" data-page="forum">Forum</a>
      <a href="leaderboard.html" data-page="leaderboard">Liderlik</a>
      <a href="friends.html" data-page="friends">ArkadaÅŸlar</a>
      <a href="profile.html" data-page="profile">Profil</a>
      <a href="settings.html" data-page="settings">Ayarlar</a>
      <a href="admin.html" class="admin-link" data-page="admin">Admin</a>
      <a href="terms.html" data-page="terms">Åžartlar</a>
      <a href="privacy.html" data-page="privacy">Gizlilik</a>
    </div>
    <div class="right">
      <span class="nickname show-when-auth"></span>
      <button class="btn small ghost show-when-auth" onclick="logout()">Oturumu Kapat</button>
      <a class="btn small hide-when-auth" href="index.html">GiriÅŸ</a>
      <button class="btn small ghost" onclick="toggleTheme()" title="Tema">ðŸŒ“</button>
    </div>
  </div>
</div>

  <div class="container">
    <div class="card">
      <h3 class="title">GÃ¼nÃ¼n CÃ¼mlesi</h3>
      <div class="grid-2">
        <input class="input" id="p1" placeholder="GÃ¼nÃ¼n cÃ¼mlesi #1 (____)"/>
        <input class="input" id="p2" placeholder="GÃ¼nÃ¼n cÃ¼mlesi #2 (____)"/>
      </div>
      <div class="flex" style="margin-top:8px">
        <button class="btn" onclick="savePrompts()">Kaydet</button>
      </div>
      <p class="small-muted">Mevcut: <span id="curPrompts"></span></p>
    </div>

    <div class="card">
      <h3 class="title">Ã–neriler</h3>
      <div id="suggestions"></div>
    </div>

    <div class="card">
      <h3 class="title">Moderasyon</h3>
      <div id="modList"></div>
    </div>
  </div>
  <footer>Â© 2025 LafKat</footer>

<script>
function initAdmin(){
  initTopbar('admin');
  const u = getUser();
  if(!u || u.role!=='admin'){ toast('Admin yetkisi gerekli'); return location.href='index.html'; }
  loadPrompts(); renderSuggestions(); renderMod();
}
function savePrompts(){
  const p1 = document.querySelector('#p1').value.trim(), p2 = document.querySelector('#p2').value.trim();
  localStorage.setItem('lafkat_prompts', JSON.stringify([p1,p2]));
  toast('Kaydedildi'); loadPrompts();
}
function loadPrompts(){
  const arr = JSON.parse(localStorage.getItem('lafkat_prompts') || '[]');
  document.querySelector('#curPrompts').textContent = arr.filter(Boolean).join(' â€¢ ') || 'TanÄ±mlÄ± deÄŸil';
}
function renderSuggestions(){
  const s = JSON.parse(localStorage.getItem(LS.settings)||'{}');
  const box = document.querySelector('#suggestions'); box.innerHTML='';
  (s.suggestions || []).forEach((txt,i)=>{
    const row = document.createElement('div');
    row.className='card';
    row.innerHTML = `<div class="flex" style="justify-content:space-between">
      <div>${txt}</div>
      <div class="flex">
        <button class="btn small ghost" onclick="approveSug(${i})">Onayla</button>
        <button class="btn small ghost" onclick="rmSug(${i})">Sil</button>
      </div>
    </div>`;
    box.appendChild(row);
  });
}
function approveSug(i){
  const s = JSON.parse(localStorage.getItem(LS.settings)||'{}');
  const txt = (s.suggestions||[])[i];
  const arr = JSON.parse(localStorage.getItem('lafkat_prompts') || '[]');
  arr.push(txt); localStorage.setItem('lafkat_prompts', JSON.stringify(arr));
  rmSug(i); loadPrompts();
}
function rmSug(i){
  const s = JSON.parse(localStorage.getItem(LS.settings)||'{}');
  (s.suggestions||[]).splice(i,1);
  localStorage.setItem(LS.settings, JSON.stringify(s));
  renderSuggestions();
}
function renderMod(){
  const arr = getCompletions();
  const box = document.querySelector('#modList'); box.innerHTML='';
  arr.forEach((x)=>{
    const d = document.createElement('div');
    d.className='card';
    d.innerHTML = `<div class="flex" style="justify-content:space-between">
      <div><b>@${x.user.nick}</b>: ${x.text}</div>
      <div class="flex"><button class="btn small ghost" onclick="delItem('${x.id}')">Sil</button></div>
    </div>`;
    box.appendChild(d);
  });
}
function delItem(id){
  const arr = getCompletions().filter(x=> x.id!==id);
  localStorage.setItem(LS.completions, JSON.stringify(arr));
  renderMod(); toast('Silindi');
}
</script>
</body>
</html>
