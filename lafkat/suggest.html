<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lafkat – Cümle Öner</title>
<meta name="theme-color" content="#FF7F2F" />
<style>
  :root{--orange:#FF7F2F;--orange-2:#ff9a58;--line:#ffd7bf;--ink:#1b1b1b}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;
       background:linear-gradient(180deg,var(--orange) 0%,var(--orange-2) 100%);color:var(--ink)}
  .header{background:#fff4ec;border-bottom:1px solid var(--line)}
  .header .inner{max-width:1000px;margin:0 auto;padding:10px 16px;display:flex;gap:10px;align-items:center}
  nav{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
  nav a{text-decoration:none;color:#7a3b14;font-weight:700;font-size:14px;padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:#fff}
  nav a:hover{background:#ffefe4;border-color:#ffb98d}
  .wrap{max-width:800px;margin:16px auto;padding:16px;background:#fff;border:1px solid var(--line);border-radius:14px}
  h1{margin:0 0 8px;font-size:22px;color:#7a3b14}
  textarea{width:100%;min-height:110px;padding:12px;border:1.6px solid #ffd0b3;border-radius:12px;font-size:15px}
  textarea:focus{border-color:#ff9a58;box-shadow:0 0 0 4px #ffe7d7}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .btn{cursor:pointer;border:none;background:#FF7F2F;color:#fff;padding:12px 16px;border-radius:12px;font-weight:800}
  .btn.secondary{background:#fff;color:#ff6a08;border:1.6px solid #ffd0b3}
  .note{font-size:12px;color:#8b5a3a;margin-top:6px}
  .empty{border:1px dashed #ffc49f;border-radius:10px;padding:12px;background:#fff7ef;color:#7a3b14;margin-top:10px}
</style>
</head>
<body>
<header class="header">
  <div class="inner">
    <div style="width:40px;height:40px;border-radius:10px;background:radial-gradient(100% 100% at 30% 30%,#ffd18f,#ff7f2f);display:grid;place-items:center;color:#fff;font-weight:900">💡</div>
    <strong>Lafkat</strong>
    <nav>
      <a href="index-compact.html">Bugünün Cümlesi</a>
      <a href="forum.html">Forum</a>
      <a href="leaderboard.html">Liderlik</a>
      <a href="friends.html">Arkadaşlar</a>
      <a href="profile.html">Profil</a>
      <a href="settings.html">Ayarlar</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <h1>Cümle Öner</h1>
  <p class="note">İpucu: Cümlenin uygun yerinde <b>____</b> (dört alt çizgi) olmalı. Örn: <i>“Akşam yemeğinde konu birden ____ dönüverdi.”</i></p>

  <textarea id="txt" placeholder="Önerinizi yazın ve boşluğu ____ şeklinde bırakın."></textarea>
  <div id="msg" class="note"></div>
  <div class="row">
    <button class="btn" id="btnSend">Gönder</button>
    <a class="btn secondary" href="index-compact.html">Ana sayfa</a>
  </div>

  <div id="visitorNote" class="empty" style="display:none">
    Ziyaretçi modundasınız. Öneri göndermek için lütfen <a href="login.html">giriş yapın</a>.
  </div>
</main>

<footer style="max-width:800px;margin:0 auto 20px;padding:0 16px;color:#fff;opacity:.9">
  © Lafkat • “Sözcükleri kat, eğlenceyi yakala!”
</footer>

<!-- Firebase (opsiyonel) -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<script>
let ENABLE_FIREBASE=false; // canlıya alırken true yap
const firebaseConfig={
  // apiKey:"...", authDomain:"...", projectId:"lafkat-23687"
};
const $=s=>document.querySelector(s);
let db=null,auth=null;

(function init(){
  if(firebaseConfig && firebaseConfig.projectId && ENABLE_FIREBASE){
    firebase.initializeApp(firebaseConfig); db=firebase.firestore(); auth=firebase.auth();
    auth.onAuthStateChanged(u=>{
      if(!u){ $("#visitorNote").style.display="block"; }
    });
  }else{
    $("#visitorNote").style.display="block"; // demo
  }
})();

function validText(t){ return t.includes("____") && t.trim().length>=12; }

document.getElementById("btnSend").addEventListener("click", async ()=>{
  const text = $("#txt").value.trim();
  if(!validText(text)){ $("#msg").textContent="Lütfen cümlede ____ boşluğu bırakın ve biraz daha detay verin."; return; }

  if(!db){ alert("(DEMO) Öneri alındı."); $("#txt").value=""; return; }

  const role = localStorage.getItem("authRole");
  if(role==="visitor"){ return alert("Öneri için giriş yapmalısınız."); }

  const u = (auth && auth.currentUser) || null;
  if(!u){ return alert("Giriş yapın."); }

  await db.collection("promptSuggestions").add({
    text,
    uid: u.uid,
    name: u.displayName || u.email || "Kullanıcı",
    at: firebase.firestore.Timestamp.now(),
    status: "pending"
  });
  $("#txt").value="";
  $("#msg").textContent="Teşekkürler! Öneriniz admin onayına gönderildi.";
});
</script>
</body>
</html>
