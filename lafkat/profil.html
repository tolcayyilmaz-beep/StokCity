<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lafkat ‚Äì Profil</title>
<meta name="description" content="Lafkat profil sayfasƒ± ‚Äì kullanƒ±cƒ± bilgileri, g√∂nderiler ve davet." />
<style>
  :root{
    --orange-1:#ff7a1a; --orange-2:#f36a00;
    --card:#fff9f2; --ink:#2b2b2b; --muted:#7b7b7b; --ring:rgba(0,0,0,.08);
    --shadow:0 8px 24px rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.08);
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink);
    background:
      radial-gradient(90vmax 90vmax at 100% -10%, rgba(255,255,255,.08), transparent 60%),
      linear-gradient(180deg,var(--orange-1),var(--orange-2));
    background-attachment:fixed;
  }

  /* Topbar & Drawer (same baseline as index/forum) */
  .topbar{position:sticky;top:0;z-index:60;backdrop-filter:blur(6px);background:rgba(255,255,255,.30);border-bottom:1px solid rgba(255,255,255,.45)}
  .topbar-inner{max-width:1200px;margin:auto;padding:10px 16px;display:flex;align-items:center;gap:10px}
  .hamburger button{appearance:none;background:#fff;border:1px solid rgba(0,0,0,.12);border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}
  .brand{display:flex;align-items:center;gap:10px;font-weight:900}
  .brand img{width:34px;height:34px;border-radius:9px;box-shadow:0 6px 14px rgba(0,0,0,.25)}
  .brand .t{font-size:22px;color:#fff;text-shadow:0 2px 10px rgba(0,0,0,.28)}
  nav.hnav{margin-left:auto;display:none;gap:8px;flex-wrap:wrap}
  nav.hnav a{color:#1b1b1b;text-decoration:none;font-weight:600;background:rgba(255,255,255,.85);padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.55)}
  nav.hnav a.active{outline:3px solid rgba(255,255,255,.7)}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:opacity .25s;z-index:55}
  .overlay.show{opacity:1;pointer-events:auto}
  .drawer{position:fixed;inset:0 auto 0 0;width:min(84vw,320px);background:#fff;border-right:1px solid rgba(0,0,0,.08);box-shadow:var(--shadow);
          transform:translateX(-100%);transition:transform .25s;z-index:56;display:flex;flex-direction:column}
  .drawer.open{transform:translateX(0)}
  .drawer .head{padding:16px;border-bottom:1px solid rgba(0,0,0,.06);display:flex;align-items:center;gap:10px}
  .drawer nav{display:grid;gap:8px;padding:12px}
  .drawer nav a{padding:10px 12px;border-radius:12px;border:1px solid rgba(0,0,0,.08);text-decoration:none;color:#1b1b1b;background:#fff;font-weight:700}
  .drawer .foot{margin-top:auto;padding:12px;border-top:1px solid rgba(0,0,0,.06)}
  @media (min-width:980px){ nav.hnav{display:flex}.hamburger{display:none} }

  /* Layout */
  .wrap{max-width:1100px;margin:22px auto;padding:0 16px}
  .grid{display:grid;gap:18px;grid-template-columns: 360px 1fr}
  @media (max-width:980px){ .grid{grid-template-columns:1fr} }

  /* Cards */
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid var(--ring)}
  .card .hd{padding:14px 16px;border-bottom:1px solid rgba(0,0,0,.06);font-weight:800}
  .card .bd{padding:14px 16px}

  /* Profile specifics */
  .avatar{width:72px;height:72px;border-radius:50%;display:grid;place-items:center;
    background:linear-gradient(180deg,#ffe0c6,#ffbf88); border:1px solid rgba(0,0,0,.08);
    font-weight:900; color:#7a4a16; box-shadow: inset 0 0 0 2px rgba(255,255,255,.7)}
  .kv{display:grid;gap:6px;margin-top:10px}
  .kv div{font-size:14px}
  .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .badge{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:999px;padding:6px 10px;font-weight:700;font-size:13px}
  .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
  .stats .s{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:12px;padding:10px;text-align:center}
  .stats .s .v{font-size:20px;font-weight:900}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .btn{appearance:none;border:1px solid rgba(0,0,0,.1);background:#fff;padding:10px 12px;border-radius:12px;font-weight:800;cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,#ffb37a,#ff8e3a);color:#3a240e;border:0}
  .btn.danger{color:#b12020;border-color:#b12020;background:#fff}
  input[type="email"],input[type="text"]{width:100%;padding:10px;border:1px solid rgba(0,0,0,.12);border-radius:10px}
  .post{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:12px;padding:12px;margin-bottom:12px}
  .meta{font-size:13px;color:var(--muted);margin-bottom:6px}
  .actions{display:flex;gap:8px;flex-wrap:wrap}
  .loadmore{text-align:center;margin-top:10px}

  /* Modal & Toast */
  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.45);z-index:70}
  .modal.open{display:grid}
  .dialog{width:min(560px,92vw);background:#fff;border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
  .dialog .hd{padding:12px 14px;font-weight:900;border-bottom:1px solid rgba(0,0,0,.06)}
  .dialog .bd{padding:14px}
  .dialog .ft{padding:12px 14px;border-top:1px solid rgba(0,0,0,.06);display:flex;gap:10px;justify-content:flex-end}
  .toast{position:fixed;bottom:18px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:999px;opacity:0;pointer-events:none;transition:opacity .25s;z-index:80}
  .toast.show{opacity:1}
</style>
</head>
<body>
  <!-- Overlay & Drawer -->
  <div class="overlay" id="overlay"></div>
  <aside class="drawer" id="drawer" aria-hidden="true" aria-label="Men√º">
    <div class="head"><img src="assets/logo.png" alt="" width="28" height="28" onerror="this.style.display='none'"><strong>Lafkat Men√º</strong></div>
    <nav>
      <a href="index.html">Anasayfa</a>
      <a href="forum.html">Forum</a>
      <a href="liderlik.html">Liderlik</a>
      <a href="arkadaslar.html">Arkada≈ülar</a>
      <a href="profil.html">Profil</a>
      <a href="ayarlar.html">Ayarlar</a>
      <a href="#" id="adminLink1" style="display:none">Admin Y√∂netimi</a>
    </nav>
    <div class="foot"><a href="#" style="text-decoration:none;color:#b12020;font-weight:800">√áƒ±kƒ±≈ü</a></div>
  </aside>

  <!-- Topbar -->
  <header class="topbar">
    <div class="topbar-inner">
      <div class="hamburger"><button id="menuBtn" aria-label="Men√ºy√º a√ß" aria-expanded="false" aria-controls="drawer">‚ò∞ Men√º</button></div>
      <a class="brand" href="index.html">
        <img src="assets/logo.png" alt="Lafkat" onerror="this.style.display='none'"><span class="t">Lafkat</span>
      </a>
      <nav class="hnav" aria-label="Ana men√º">
        <a href="index.html">Anasayfa</a>
        <a href="forum.html">Forum</a>
        <a href="liderlik.html">Liderlik</a>
        <a href="arkadaslar.html">Arkada≈ülar</a>
        <a class="active" href="profil.html">Profil</a>
        <a href="ayarlar.html">Ayarlar</a>
        <a href="#" id="adminLink2" style="display:none">Admin Y√∂netimi</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- Left: Profile -->
      <section class="card">
        <div class="hd">Profil</div>
        <div class="bd">
          <div class="row">
            <div class="avatar" id="avatar">T</div>
            <div>
              <div style="font-weight:900;font-size:18px" id="displayName">Tolcay Yƒ±lmaz</div>
              <div>@<span id="nickname">Tolcay</span></div>
              <div class="kv">
                <div>E-posta: <strong id="email">tolcay@example.com</strong></div>
                <div class="badges">
                  <span class="badge">üéØ Yeni √úye</span>
                  <span class="badge">üî• Haftanƒ±n Lafkat√ßƒ±sƒ±</span>
                </div>
              </div>
            </div>
          </div>

          <div class="stats">
            <div class="s"><div class="v" id="statPosts">23</div><div class="t">Toplam G√∂nderi</div></div>
            <div class="s"><div class="v" id="statLikes">312</div><div class="t">Toplam Beƒüeni</div></div>
            <div class="s"><div class="v" id="statComments">58</div><div class="t">Toplam Yorum</div></div>
          </div>

          <div class="row" style="margin-top:12px">
            <button class="btn primary" id="editNameBtn">Adƒ± D√ºzenle</button>
            <button class="btn" id="copyNickBtn">Nick‚Äôi Kopyala</button>
            <a class="btn danger" href="#" title="Oturumu Kapat">√áƒ±kƒ±≈ü</a>
          </div>
          <div style="font-size:12px;color:var(--muted);margin-top:6px">Ad deƒüi≈üikliƒüi **6 ayda bir** yapƒ±labilir (demo).</div>
        </div>
      </section>

      <!-- Right: Invite -->
      <aside class="card">
        <div class="hd">Arkada≈ü Davet Et</div>
        <div class="bd">
          <p class="hint" style="margin:0 0 8px 0">E-posta gir, davet linkini payla≈ü:</p>
          <input type="email" id="inviteEmail" placeholder="ornek@posta.com" />
          <div class="row" style="margin-top:10px">
            <button class="btn" id="makeInvite">Davet Linkini Kopyala</button>
            <button class="btn" id="shareInvite">Payla≈ü</button>
          </div>
          <p class="hint" style="margin-top:6px">Payla≈üƒ±mda otomatik olarak #SendeKatƒ±l etiketi eklenir.</p>
        </div>
      </aside>

      <!-- Full-width: Posts -->
      <section class="card" style="grid-column:1 / -1">
        <div class="hd">G√∂nderilerim</div>
        <div class="bd" id="myPosts">
          <article class="post">
            <div class="meta">12 Aƒüustos ‚Äî üëç 28 ¬∑ üí¨ 4</div>
            ‚ÄúSayfayƒ± a√ßtƒ±ƒüƒ±mda kocaman <strong>‚ÄòGizemli Kul√ºp‚Äô</strong> yazƒ±yordu.‚Äù
            <div class="actions" style="margin-top:8px">
              <button class="btn" data-copy>Metni Kopyala</button>
              <button class="btn" data-share>Payla≈ü</button>
              <button class="btn danger" data-delete>Sil</button>
            </div>
          </article>
          <article class="post">
            <div class="meta">3 Aƒüustos ‚Äî üëç 11 ¬∑ üí¨ 1</div>
            ‚ÄúDefterde <strong>‚ÄòBeni √áevir‚Äô</strong> yazƒ±yordu; arkasƒ±nda minik bir ipucu vardƒ±.‚Äù
            <div class="actions" style="margin-top:8px">
              <button class="btn" data-copy>Metni Kopyala</button>
              <button class="btn" data-share>Payla≈ü</button>
              <button class="btn danger" data-delete>Sil</button>
            </div>
          </article>
          <article class="post">
            <div class="meta">28 Temmuz ‚Äî üëç 7 ¬∑ üí¨ 0</div>
            ‚ÄúKocaman <strong>‚ÄòHarita‚Äô</strong> yazƒ±yordu ve sayfanƒ±n kenarƒ± yƒ±rtƒ±ktƒ±.‚Äù
            <div class="actions" style="margin-top:8px">
              <button class="btn" data-copy>Metni Kopyala</button>
              <button class="btn" data-share>Payla≈ü</button>
              <button class="btn danger" data-delete>Sil</button>
            </div>
          </article>
          <div class="loadmore"><button class="btn" id="loadMore">Daha Fazla Y√ºkle</button></div>
        </div>
      </section>
    </div>
  </main>

  <!-- Edit Name Modal -->
  <div class="modal" id="nameModal" aria-hidden="true" role="dialog" aria-label="Adƒ± D√ºzenle">
    <div class="dialog">
      <div class="hd">Adƒ± D√ºzenle</div>
      <div class="bd">
        <label for="newName" style="font-weight:700">Ad Soyad</label>
        <input type="text" id="newName" placeholder="Ad Soyad" value="Tolcay Yƒ±lmaz" />
        <p class="hint" style="margin:8px 0 0">Not: Ad deƒüi≈üikliƒüi 6 ayda bir yapƒ±labilir (demo kontrol√º yok).</p>
      </div>
      <div class="ft">
        <button class="btn" id="cancelName">Vazge√ß</button>
        <button class="btn primary" id="saveName">Kaydet</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
  // Admin link (demo)
  (new URLSearchParams(location.search)).get("admin")==="1" && (adminLink1.style.display=adminLink2.style.display="inline-block");

  // Drawer
  const menuBtn=document.getElementById('menuBtn');
  const drawer=document.getElementById('drawer');
  const overlay=document.getElementById('overlay');
  function openDrawer(){drawer.classList.add('open');overlay.classList.add('show');menuBtn.setAttribute('aria-expanded','true');document.body.style.overflow='hidden'; drawer.querySelector('a').focus();}
  function closeDrawer(){drawer.classList.remove('open');overlay.classList.remove('show');menuBtn.setAttribute('aria-expanded','false');document.body.style.overflow='';}
  menuBtn.addEventListener('click', ()=> drawer.classList.contains('open')?closeDrawer():openDrawer());
  overlay.addEventListener('click', closeDrawer);
  window.addEventListener('keydown', e=>{ if(e.key==='Escape' && drawer.classList.contains('open')) closeDrawer(); });

  // Toast
  const toastEl=document.getElementById('toast');
  const toast=(m)=>{toastEl.textContent=m;toastEl.classList.add('show');setTimeout(()=>toastEl.classList.remove('show'),1400)};

  // Avatar initial
  const displayNameEl=document.getElementById('displayName');
  const avatarEl=document.getElementById('avatar');
  function setInitial(){ const t=(displayNameEl.textContent||'').trim(); avatarEl.textContent = t ? t[0].toUpperCase() : 'U'; }
  setInitial();

  // Edit Name Modal
  const nameModal=document.getElementById('nameModal');
  const editNameBtn=document.getElementById('editNameBtn');
  const cancelName=document.getElementById('cancelName');
  const saveName=document.getElementById('saveName');
  const newName=document.getElementById('newName');

  function openName(){ nameModal.classList.add('open'); nameModal.setAttribute('aria-hidden','false'); newName.focus(); }
  function closeName(){ nameModal.classList.remove('open'); nameModal.setAttribute('aria-hidden','true'); }

  editNameBtn.addEventListener('click', openName);
  cancelName.addEventListener('click', closeName);
  saveName.addEventListener('click', ()=>{
    const v=newName.value.trim(); if(!v){ toast('Ad bo≈ü olamaz'); return; }
    displayNameEl.textContent=v; setInitial(); closeName(); toast('Ad g√ºncellendi (demo)');
  });
  window.addEventListener('keydown', e=>{ if(e.key==='Escape' && nameModal.classList.contains('open')) closeName(); });

  // Copy Nick
  document.getElementById('copyNickBtn').addEventListener('click', ()=>{
    const nick=document.getElementById('nickname').textContent;
    navigator.clipboard?.writeText(nick).then(()=>toast('Nick kopyalandƒ±'));
  });

  // Invite link build + copy/share (demo)
  function buildInvite(email){
    const url = new URL(location.href);
    url.pathname = url.pathname.replace('profil.html','index.html');
    url.searchParams.set('invite', '1');
    if(email) url.searchParams.set('to', email);
    return url.toString();
  }
  document.getElementById('makeInvite').addEventListener('click', ()=>{
    const email=document.getElementById('inviteEmail').value.trim();
    const link=buildInvite(email);
    navigator.clipboard?.writeText(`Lafkat‚Äôa katƒ±l! ${link} #SendeKatƒ±l`).then(()=>toast('Davet linki kopyalandƒ±'));
  });
  document.getElementById('shareInvite').addEventListener('click', async ()=>{
    const email=document.getElementById('inviteEmail').value.trim();
    const link=buildInvite(email);
    const data={title:'Lafkat', text:`Lafkat‚Äôa katƒ±l! #SendeKatƒ±l`, url:link};
    try{ if(navigator.share) await navigator.share(data); else { await navigator.clipboard?.writeText(`${data.text} ${data.url}`); toast('Payla≈üƒ±m panoya kopyalandƒ±'); } }catch(e){}
  });

  // My posts actions (copy/share/delete)
  document.querySelectorAll('#myPosts .post').forEach(post=>{
    const text = post.innerText.replace(/\s+/g,' ').trim();
    post.querySelectorAll('[data-copy]').forEach(btn=>{
      btn.addEventListener('click', ()=> navigator.clipboard?.writeText(text).then(()=>toast('Metin kopyalandƒ±')));
    });
    post.querySelectorAll('[data-share]').forEach(btn=>{
      btn.addEventListener('click', async ()=>{
        const data={title:'Lafkat', text:text + ' #SendeKatƒ±l', url:location.href};
        try{ if(navigator.share) await navigator.share(data); else { await navigator.clipboard?.writeText(`${data.text} ${data.url}`); toast('Payla≈üƒ±m panoya kopyalandƒ±'); } }catch(e){}
      });
    });
    post.querySelectorAll('[data-delete]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        post.remove();
        const p=document.getElementById('statPosts'); p.textContent = Math.max(0, (+p.textContent)-1);
        toast('G√∂nderi silindi (demo)');
      });
    });
  });

  // Load more (demo)
  document.getElementById('loadMore').addEventListener('click', ()=>{
    const cont=document.getElementById('myPosts');
    const a=document.createElement('article');
    a.className='post';
    a.innerHTML=`
      <div class="meta">Bug√ºn ‚Äî üëç 0 ¬∑ üí¨ 0</div>
      ‚ÄúSayfayƒ± a√ßtƒ±ƒüƒ±mda <strong>‚ÄòYeni Level‚Äô</strong> yazƒ±yordu.‚Äù
      <div class="actions" style="margin-top:8px">
        <button class="btn" data-copy>Metni Kopyala</button>
        <button class="btn" data-share>Payla≈ü</button>
        <button class="btn danger" data-delete>Sil</button>
      </div>`;
    cont.insertBefore(a, cont.querySelector('.loadmore'));
    // wire actions
    a.querySelector('[data-copy]').addEventListener('click', ()=> navigator.clipboard?.writeText(a.innerText.replace(/\s+/g,' ').trim()).then(()=>toast('Metin kopyalandƒ±')));
    a.querySelector('[data-share]').addEventListener('click', async ()=>{
      const text=a.innerText.replace(/\s+/g,' ').trim();
      const data={title:'Lafkat', text:text+' #SendeKatƒ±l', url:location.href};
      try{ if(navigator.share) await navigator.share(data); else { await navigator.clipboard?.writeText(`${data.text} ${data.url}`); toast('Payla≈üƒ±m panoya kopyalandƒ±'); } }catch(e){}
    });
    a.querySelector('[data-delete]').addEventListener('click', ()=>{ a.remove(); const p=document.getElementById('statPosts'); p.textContent = Math.max(0,(+p.textContent)-1); toast('G√∂nderi silindi (demo)'); });
  });
</script>
<!-- Firebase ba≈ülat (t√ºm sayfalarda ortak) -->
<script type="module">
  import "./firebase-init.js";
</script>
</body>
</html>
